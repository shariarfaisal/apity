!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var s=class{constructor(){this._items=(()=>document.getElementById("projects")),this._item=(e=>document.getElementById(`projects_${e}`))}quote(){return'\n      <div class="quote">\n        <div class="">\n          <code style="color: #adb0b2;"><<span>Happy Coding <i class="fa fa-heart text-danger"></i></span>/></code>\n          <div class="d-block text-center text-success"><small data-toggle="modal" data-target="#createProjectModal" class="quote-new"><i class="fa fa-book"></i> New</small></div>\n        </div>\n      </div>\n    '}homePage(){return'\n    <div id="home_page" class="Home">\n      \x3c!-- Create Project Section ... --\x3e\n      <div class="px-3 px-md-5 light-shadow">\n        <div class="d-flex justify-content-between py-3">\n          <div class="">\n            <h2 class="homepage-title">Apity</h2>\n            <div class="modal" id="createProjectModal">\n              <div class="modal-dialog">\n                <div class="modal-content">\n                  <div class="modal-body">\n                    <form name="createNewProject" method="post">\n                      <small class="project_create_error text-danger"></small>\n                      <div class="form-group">\n                        <small class="create_project_error text-danger"></small>\n                        <input required type="text" class="form-control form-control-sm" name="name" placeholder="Project Name">\n                      </div>\n                      <div class="d-flex justify-content-end">\n                        <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                        <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Submit</button>\n                      </div>\n                    </form>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="">\n            <span class="drop-target">\n              <i id="home_page_settings" class="fa fa-cog text-h-green pointer text-muted"></i>\n              <div class="drop">\n                <div data-toggle="modal" data-target="#createProjectModal" class="drop-item text-success font-7"><i class="fa fa-book text-success"></i> New</div>\n                <div id="import_data" class="drop-item"><i class="fa fa-upload text-primary"></i> Import</div>\n              </div>\n            </span>\n          </div>\n        </div>\n      </div>\n\n\n      <div id="projects" class="row customScroll px-3 m-0 w-100 px-md-5 py-3">\n        \x3c!-- Projects item will be here --\x3e\n      </div>\n    </div>\n    '}static updateModal({id:e,name:t}){return`\n      <div class="modal" id="updateProjectModal${e}">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-body">\n              <form name="updateProject${e}" method="post">\n                <small class="project_update_error_${e} text-danger"></small>\n                <div class="form-group">\n                  <small class="update_project_error_${e} text-danger"></small>\n                  <input required type="text" class="form-control form-control-sm" name="name" value="${t}" placeholder="Project Name">\n                </div>\n                <div class="d-flex justify-content-end">\n                  <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                  <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}static deleteModal({id:e,name:t}){return`\n      <div class="modal" id="deleteProjectModal${e}">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-body">\n              <form name="deleteProject${e}" method="post">\n                <p class="font-6 mb-0 mb-1">Write Project Name</p>\n                <div class="form-group">\n                  <input required type="text" class="form-control form-control-sm" name="name" value="" placeholder="Project Name...">\n                </div>\n                <div class="d-flex justify-content-end">\n                  <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                  <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Delete</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}item({id:e,name:t}){return`\n      <div id="projects_${e}" class="projects-item col-sm-6 col-md-4 col-lg-3 col-xl-2 my-1 my-sm-2 my-md-3">\n        <div class="rounded border shadow-hover pointer">\n          <a href="${document.location.origin}?project=${e}" class="font-6 d-block link text-dark text-center mb-0 py-3">${t}</a>\n        </div>\n      </div>\n    `}items(e){let t="";return e.forEach(e=>{t+=this.item(e)}),t||this.quote()}};document.getElementById("contents"),document.getElementById("items_container");var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};var i=class{constructor({request:e,db:t,store:n}){this.request=e,this.db=t,this.store=n,this.activeProject=null,this.__transaction=(()=>this.db.transaction("project","readwrite").objectStore("project"))}__getProjects(){return this.store}__getProjectbyName(e){const t=this.store.find(t=>t.name.toLowerCase()===e.toLowerCase());return t||!1}__getProjectById(e){const t=this.store.find(t=>t.id===e);return t||!1}__createProject(e,t){const n=this.__getProjectbyName(e.name),s=document.querySelector(".project_create_error");if(n)return void(s.innerText="Already exists!");s.innerText="",this.__transaction().add(e).onsuccess=(n=>{t(e)});const a=this.store.push(e);return this.store[a-1]}__importProject(e,t){const n=this.__getProjectbyName(e.name);let s;if(n&&e.id.toString()!==n.id.toString()){if(!window.confirm(`Do you want to replace ${e.name}!`))return;e.id=n.id.toString(),s=this.__transaction().put(e)}else n&&e.id.toString()===n.id.toString()?s=this.__transaction().add(e):(e.id=(new Date).getTime().toString(),s=this.__transaction().add(e));s.onsuccess=(n=>{t(e)})}__updateProject({id:e,name:t},n){this.__transaction().index("id").get(e).onsuccess=(s=>{const a=s.target.result;if(t.toLowerCase()!==a.name.toLowerCase()){const n=this.__getProjectbyName(t),s=document.querySelector(`.project_update_error_${e}`);if(n)return void(s.innerText="Already exists!");s.innerText=""}a.name=t,this.__transaction().put(a).onsuccess=(s=>{const a=this.store.find(t=>t.id===e);a.name=t,n(a)})})}__deleteProject({id:e,name:t,form:n},s){this.__transaction().index("id").get(e).onsuccess=(a=>{const i=a.target.result;t===i.name?this.__transaction().delete(e).onsuccess=(t=>{const n=this.store.findIndex(t=>t.id===e);this.store.splice(n,1),s(!0)}):n.name.classList.add("is-invalid")})}__getItemByName({projectID:e,name:t}){const n=this.store.find(t=>t.id===e);if(!n)throw new Error("Project not found!");const s=n.items.find(e=>e.name.toLowerCase()===t.toLowerCase());return s||!1}__createItem({projectID:e,item:t},n){this.__transaction().index("id").get(e).onsuccess=(s=>{const a=s.target.result,i=a.items.push(t);this.__transaction().put(a).onsuccess=(s=>{const a=this.store.find(t=>t.id===e);a.items.push(t),n(a.items[i-1])})})}__updateItem({projectID:e,data:{id:t,name:n}},s){this.__transaction().index("id").get(e).onsuccess=(i=>{const r=i.target.result,d=r.items.find(e=>e.id===t);if(!d)throw new Error({msg:"Item not found!",status:404,ref:"updateItem"});const o=d.name;d.name=n,this.__transaction().put(r).onsuccess=(i=>{const r=this.store.find(t=>t.id===e).items.find(e=>e.id===t);if(!r)throw new Error({msg:"Item not found!",status:404,ref:"updateItem"});r.name=n,s(a({},r,{prevName:o}))})})}__deleteItem({projectID:e,id:t},n){this.__transaction().index("id").get(e).onsuccess=(s=>{const a=s.target.result,i=a.items.findIndex(e=>e.id===t);a.items.splice(i,1),this.__transaction().put(a).onsuccess=(s=>{const a=this.store.find(t=>t.id===e),i=a.items.findIndex(e=>e.id===t);if(-1===i)throw new Error({msg:"Item not found!",status:404,ref:"deleteItem"});const r=a.items[i];a.items.splice(i,1),n(r)})})}checkSchemaDuplicate({schema:e,data:t}){console.log(e,t);const n=e.find(e=>e.name===t.name);let s=document.querySelector(".create_schema_property_error");return n?(s.innerText="Already exists!",!0):(s.innerText="",!1)}__createSchema({projectID:e,id:t,data:n},s){this.__transaction().index("id").get(e).onsuccess=(a=>{const i=a.target.result,r=i.items.find(e=>e.id===t);let d=document.querySelector(".create_schema_property_error");n.property.includes(" ")?d.innerText="Property cannot contains space!":(d.innerText="",r.schema.find(e=>e.property===n.property)?d.innerText="Already exists!":(d.innerText="",r.schema.push(n),this.__transaction().put(i).onsuccess=(a=>{const i=this.store.find(t=>t.id===e).items.find(e=>e.id===t);i.schema.push(n),s({data:n,item:i})})))})}__updateSchema({projectID:e,parentId:t,data:n},s){this.__transaction().index("id").get(e).onsuccess=(a=>{const i=a.target.result,r=i.items.find(e=>e.id===t),d=r.schema.find(e=>e.id===n.id);let o=document.querySelector(`.update_schema_property_error_${n.id}`);if(n.property.includes(" "))o.innerText="Property cannot contains space!";else{if(o.innerText="",d.property.toLowerCase()!==n.property.toLowerCase()){if(r.schema.find(e=>e.property===n.property))return void(o.innerText="Already exists!");o.innerText=""}d.property=n.property,d.type=n.type,this.__transaction().put(i).onsuccess=(a=>{const i=this.store.find(t=>t.id===e).items.find(e=>e.id===t).schema.find(e=>e.id===n.id);i.property=n.property,i.type=n.type,s(i)})}})}__deleteSchema({projectID:e,parentId:t,id:n},s){this.__transaction().index("id").get(e).onsuccess=(a=>{const i=a.target.result,r=i.items.find(e=>e.id===t),d=r.schema.findIndex(e=>e.id===n),o=r.schema[d];r.schema.splice(d,1),this.__transaction().put(i).onsuccess=(a=>{const i=this.store.find(t=>t.id===e).items.find(e=>e.id===t),r=i.schema.findIndex(e=>e.id===n);i.schema.splice(r,1),s(o)})})}__createRequest({projectID:e,id:t,data:n},s){this.__transaction().index("id").get(e).onsuccess=(i=>{const r=i.target.result,d=r.items.find(e=>e.id===t),o=document.querySelector(".create_request_error");return n.url.trim().includes(" ")?(o.innerText="Url cannot contains space!",void setTimeout(()=>{o.innerText=""},5e3)):(o.innerText="",d.requests.find(e=>e.req===n.req&&e.url===n.url)?(o.innerText="Already exists!",void setTimeout(()=>{o.innerText=""},5e3)):(o.innerText="",d.requests.push(n),void(this.__transaction().put(r).onsuccess=(i=>{const r=this.store.find(t=>t.id===e).items.find(e=>e.id===t);r.requests.push(n),s(a({},r,{data:n}))}))))})}__updateRequest({projectID:e,id:t,data:n},s){this.__transaction().index("id").get(e).onsuccess=(a=>{const i=a.target.result,r=i.items.find(e=>e.id===t),d=r.requests.find(e=>e.id.toString()===n.id.toString());if(!d)throw new Error({msg:"Request not found!",ref:"updateRequest"});const o=document.querySelector(`.update_request_error_${n.id}`);if(n.url.trim().includes(" "))return o.innerText="Url cannot contains space!",void setTimeout(()=>{o.innerText=""},5e3);if(o.innerText="",d.req.toLowerCase()!==n.req.toLowerCase()||d.url.toLowerCase()!==n.url.toLowerCase()){if(r.requests.find(e=>e.req===n.req&&e.url===n.url))return o.innerText="Already exists!",void setTimeout(()=>{o.innerText=""},5e3);o.innerText=""}d.req=n.req,d.url=n.url,d.comment=n.comment,d.data=n.data,d.middlewares=n.middlewares,this.__transaction().put(i).onsuccess=(a=>{const i=this.store.find(t=>t.id===e).items.find(e=>e.id===t).requests.find(e=>e.id.toString()===n.id.toString());i.req=n.req,i.url=n.url,i.comment=n.comment,i.data=n.data,i.middlewares=n.middlewares,s(i)})})}__deleteRequest({projectID:e,parentId:t,id:n},s){this.__transaction().index("id").get(e).onsuccess=(a=>{const i=a.target.result,r=i.items.find(e=>e.id===t),d=r.requests.findIndex(e=>e.id.toString()===n.toString());if(-1===d)throw new Error({msg:"Not found!",ref:"deleteRequest"});r.requests.splice(d,1),this.__transaction().put(i).onsuccess=(a=>{const i=this.store.find(t=>t.id===e).items.find(e=>e.id===t),r=i.requests.findIndex(e=>e.id.toString()===n.toString());i.requests.splice(r,1),s()})})}};var r=class extends i{constructor(e){super(e),this.projectComponent=new s}importProject(){const e=e=>{var t=new FileReader;t.onload=(e=>{let t;if(this.dataTesting(JSON.parse(e.target.result),e=>{t=e}),t)window.alert("File containing invalid information!");else{let t=JSON.parse(e.target.result);this.__importProject(t,e=>{this.projectComponent._items().innerHTML+=this.projectComponent.item(e),this.projectComponent._item(e.id).firstElementChild.classList.add("light-shadow")})}}),t.readAsText(e)};document.getElementById("import_data").addEventListener("click",t=>{t.preventDefault();const n=document.createElement("input");n.type="file",n.addEventListener("change",t=>{n.files[0]&&(n.files[0].name.endsWith(".json")?(e(n.files[0]),n.remove()):(n.remove(),window.alert("Only json file supported!")))}),n.click()})}exportProject(e){const t=new Blob([JSON.stringify(e)],{type:"application/json"});document.getElementById("export_data").addEventListener("click",n=>{e.items.length>0?((e,t)=>{const n=window.URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=t,s.click(),s.remove(),document.addEventListener("focus",()=>{window.URL.revokeObjectURL(e)})})(t,`apity_${e.name}_${(new Date).getTime()}.json`):window.alert("There has no data!")})}dropHandler(){document.querySelectorAll(".drop-target").forEach(e=>{const t=e.querySelector(".drop");t.addEventListener("mouseleave",t=>e.firstElementChild.click()),e.firstElementChild.addEventListener("click",n=>{const s=t.style.visibility;e.querySelector(".drop").style.visibility="visible"===s?"hidden":"visible"})})}dataItemTester({id:e,name:t,schema:n,requests:s},a){e?t?n&&Array.isArray(n)?n.forEach(e=>{e.id||"string"==typeof e.data?e.property||"string"==typeof e.data?e.type||"string"==typeof e.data||a("Schema  type required and it must have to be string"):a("Schema  property required and it must have to be string"):a("Schema id required and it must have to be string")}):a("Schema required and it must have to be an array!"):a("Item name required!"):a("Item Id required"),s&&Array.isArray(s)?s.forEach(e=>{e.id||"string"==typeof e.data?e.req||"string"==typeof e.data?e.url||"string"==typeof e.data?e.data?"string"!=typeof e.data&&a("Request Data have to be string!"):e.comment?"string"!=typeof e.comment&&a("Request comment have to be string!"):e.middlewares&&(Array.isArray(e.middlewares)||a("Request middlewares have to be string!")):a("Request url required and it have to be string!"):a("Request req required and it have to be string!"):a("Request id required and it have to be string!")}):a("Request required and it have to be an array")}dataTesting(e,t){if(e&&e.id&&e.name&&Array.isArray(e.items)){e.items.sort((e,t)=>e.id-t.id);let n="";e.items=e.items.reduce((e,t)=>(n!==t.id&&(n=t.id,e.push(t)),e),[]),e.items.forEach(e=>{this.dataItemTester(e,t)})}else t("Invalid data!")}focusEvent(){document.addEventListener("click",e=>{var t=e.target,n=e.target.getAttribute("data-toggle");if(n||(n=t.parentElement.getAttribute("data-toggle"),t=t.parentElement),"modal"===n){var s=t.getAttribute("data-target");if(s&&!(s=s.replace("#","")).includes("update")){var a=document.getElementById(s);a.querySelector("input")&&a.querySelector("input").focus()}}})}toggleSidebar({id:e}){const t=document.getElementById(`progress_btn_${e}`),n=document.getElementById("items_list");t.addEventListener("click",e=>{n.classList.contains("d-none")?n.classList.remove("d-none"):n.classList.add("d-none")})}};var d=class extends i{constructor(e){super(e)}objectStore(){return this.db.transaction("model","readwrite").objectStore("model")}_deleteItem(e,t){this.__deleteItem(e,n=>{document.getElementById(e.id).remove(),t(),document.getElementById("SL_balloon_obj").remove(),document.querySelector(".modal-backdrop").remove()})}updateItem(e,{id:t,name:n}){const s=this.__getProjectById(e);if(s.items.find(e=>e.id===t).name.toLowerCase()!==n.toLowerCase()){const e=s.items.find(e=>e.name.toLowerCase()===n.toLowerCase());let t=document.querySelector(".update_item_error");if(e)return void(t.innerText="Already exists!");t.innerText=""}this.__updateItem({projectID:e,data:{id:t,name:n}},e=>{const t=document.getElementById(e.id);t.querySelector(".item-name").innerText=e.name;const n=t.querySelector(".create-schema-title");n.innerText=n.innerText.replace(e.prevName,e.name),document.getElementById(`items_list_item_${e.id}`).innerText=e.name;const s=document.getElementById(`createRequestModal${e.id}`).querySelector(".create-request-title");s.innerText=s.innerText.replace(e.prevName,e.name),document.getElementById(`updateItemModal${e.id}`).querySelector(".dismiss").click()})}checkItemExistence({projectID:e,name:t}){let n=document.querySelector(".create_item_error");return t.includes(" ")?(n.innerText="Name cannot contain spaces!",!0):(n.innerText="",this.__getItemByName({projectID:e,name:t})?(n.innerText="Already exists!",!0):(n.innerText="",!1))}_createItem({id:e,data:t,cb:n}){t.name?this.checkItemExistence({projectID:e,name:t.name})||this.__createItem({projectID:e,item:t},e=>{n(e)}):window.alert("Name must not be empty!")}};var o=class{constructor(){}static middlewares(e){let t="";return e.forEach(e=>{t+=`<small class="mx-2">${e}</small>`}),t}static items(e){let t="";return e.forEach(e=>{t+=this.item(e)}),t}static createModal({id:e,name:t,schema:n}){return`\n    <div class="modal" id="createRequestModal${e}">\n      <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n          <div class="modal-body">\n            <h6 class="create-request-title text-center mb-4 text-muted">Add Request to <strong>${t}</strong></h6>\n            <div>\n              <small class="d-block text-center text-success request_success_msg"></small>\n              <small class="d-block text-center text-danger create_request_error"></small>\n            </div>\n            <form name="request_${e}" method="post">\n              <div class="row justify-content-center">\n                <div class="col-12 row w-100 my-1">\n                  <div class="col-4">\n                    <div class="form-group">\n                      <label for="request">Request</label>\n                      <select name="req" id="request" class="form-control">\n                        <option value="Get">Get</option>\n                        <option value="Post">Post</option>\n                        <option value="Put">Put</option>\n                        <option value="Delete">Delete</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class="col-8">\n                    <div class="form-group">\n                      <label for="url">URL</label>\n                      <input required id="url" class="form-control" type="text" name="url" placeholder="URL"/>\n                    </div>\n                  </div>\n                </div>\n                <div class="col-12 my-1">\n                  <div class="form-group">\n                    <label for="payloads">Data payloads</label>\n                    <textarea class="form-control" id="payloads" name="data" cols="" rows="5" placeholder="{ property: type }"></textarea>\n                  </div>\n                </div>\n                <div class="col-12 my-1">\n                  <div class="Comment">\n                    <label for="comment">Comment</label>\n                    <input id="comment" class="form-control" type="text" name="comment" placeholder="Comment ..." />\n                  </div>\n                </div>\n                <div class="col-12 my-1">\n                  <div class="form-group">\n                    <label for="middlewares">Middlewares</label>\n                    <input id="middlewares" class="form-control" type="text" name="middlewares" placeholder="Middlewars by comma ..." />\n                  </div>\n                </div>\n                <div class="col-12 d-flex justify-content-end mt-4">\n                  <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                  <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    `}static colorChecker(e){let t="";return"get"===e.toLowerCase()?t="info":"post"===e.toLowerCase()?t="success":"put"===e.toLowerCase()?t="warning":"delete"===e.toLowerCase()&&(t="danger"),t}static item({id:e,req:t,url:n,comment:s,data:a,middlewares:i}){return i=i.filter(e=>e),`\n    <div id="request_${e}" class="request bg-light py-3 px-4 rounded my-2">\n      <div class="d-flex">\n        <p class="mb-0 w-100">\n          <strong class="text-capitalize req_url bg-${this.colorChecker(t)}">${t}</strong>\n          <span class="req_url">${n}</span>\n          ${s?`<small class="text-muted ml-4">// ${s}</small>`:""}\n        </p>\n        <div class="d-flex">\n          <span class="mx-2"><i data-toggle="modal" data-target="#update_request_${e}" class="fa pointer text-h-lightgreen text-muted fa-edit"></i></span>\n          <span class="mx-2"><i id="delete_request_${e}" class="fa pointer text-h-red text-muted fa-trash"></i></span>\n          ${this.updateModal({id:e,req:t,url:n,comment:s,data:a,middlewares:i})}\n        </div>\n      </div>\n      ${a?`<div class="py-3">\n          <textarea disabled class="form-control disabled" name="data" rows="${a.split(",").length+2}">${a}</textarea>\n        </div>`:""}\n      ${i.length>0?`<div class="my-2">\n        <div class="d-flex align-items-center">\n          <span><strong class="">Middlewars: </strong><span>\n          ${this.middlewares(i)}\n        </div>\n      </div>`:""}\n    </div>\n    `}static updateModal({id:e,req:t,url:n,comment:s,data:a,middlewares:i}){return`\n    <div class="modal" id="update_request_${e}">\n      <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n          <div class="modal-body">\n            <h6 class="text-center mb-4 text-muted">Update Request</strong></h6>\n            <form name="update_request_${e}" method="post">\n              <span class="d-block text-center update_request_error_${e} text-danger"></span>\n              <div class="row justify-content-center">\n                <div class="col-12 row w-100 my-1">\n                  <div class="col-4">\n                    <div class="form-group">\n                      <label for="update_req_${e}">Request</label>\n                      <select name="req" id="update_req_${e}" class="form-control">\n                        <option ${"Get"===t?"selected":""} value="Get">Get</option>\n                        <option ${"Post"===t?"selected":""} value="Post">Post</option>\n                        <option ${"Put"===t?"selected":""} value="Put">Put</option>\n                        <option ${"Delete"===t?"selected":""} value="Delete">Delete</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class="col-8">\n                    <div class="form-group">\n                      <label for="update_url_${e}">URL</label>\n                      <input required id="update_url_${e}" value="${n}" class="form-control" type="text" name="url" placeholder="URL"/>\n                    </div>\n                  </div>\n                </div>\n                <div class="col-12 my-1">\n                  <div class="form-group">\n                    <label for="update_payloads_${e}">Data payloads</label>\n                    <textarea class="form-control" id="update_payloads_${e}" name="data" cols="" rows="${a.split(",").length+2}" placeholder="{ property: type }">${a}</textarea>\n                  </div>\n                </div>\n                <div class="col-12 my-1">\n                  <div class="Comment">\n                    <label for="update_comment_${e}">Comment</label>\n                    <input value="${s}" id="update_comment_${e}" class="form-control" type="text" name="comment" placeholder="Comment ..." />\n                  </div>\n                </div>\n                <div class="col-12 my-1">\n                  <div class="form-group">\n                    <label for="update_middlewares_${e}">Middlewares</label>\n                    <input value="${i.join(",")}" id="update_middlewares_${e}" class="form-control" type="text" name="middlewares" placeholder="Middlewars by comma ..." />\n                  </div>\n                </div>\n                <div class="col-12 d-flex justify-content-end mt-4">\n                  <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                  <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    `}},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};var c=class extends i{constructor(e){super(e)}deleteRequestEvent({projectID:e,parentId:t,id:n}){document.getElementById(`delete_request_${n}`).addEventListener("click",s=>{this.__deleteRequest({projectID:e,parentId:t,id:n},()=>{document.getElementById(`request_${n}`).remove()})})}deleteRequestEvents(e,{id:t,requests:n}){n.forEach(n=>{this.deleteRequestEvent(l({projectID:e,parentId:t},n))})}updateRequestEvent({projectID:e,parentId:t,data:{id:n}}){const s=document.forms[`update_request_${n}`];s.addEventListener("submit",a=>{a.preventDefault();let i=s.req.value,r=s.url.value,d=s.data.value,c=s.comment.value,m=s.middlewares.value.split(",");this.__updateRequest({projectID:e,id:t,data:{id:n,req:i,url:r,data:d,comment:c,middlewares:m}},s=>{document.getElementById(`update_request_${n}`).querySelector(".dismiss").click();let a=document.createElement("div");a.innerHTML=o.item(s),document.getElementById(`request_${n}`).innerHTML=a.children[0].innerHTML,this.updateRequestEvent({projectID:e,parentId:t,data:{id:n}}),this.deleteRequestEvent(l({projectID:e,parentId:t},s))})})}updateRequestEvents(e,{id:t,requests:n}){n.forEach(n=>{this.updateRequestEvent({projectID:e,parentId:t,data:n})})}requestEvent(e,t){const n=document.forms[`request_${t.id}`];n.addEventListener("submit",s=>{s.preventDefault();let a=n.req.value,i=n.url.value,r=n.data.value.trim(),d=n.comment.value,l=n.middlewares.value.split(","),c=(new Date).getTime().toString();this.__createRequest({projectID:e,id:t.id,data:{id:c,req:a,url:i,data:r,comment:d,middlewares:l}},t=>{let s=document.getElementById(`requests_${t.id}`);s.innerHTML=s.innerHTML+o.item(t.data),document.querySelector(".request_success_msg").innerText="Data has been added!",setTimeout(()=>{document.querySelector(".request_success_msg").innerText=""},3e3),n.data.value="",n.comment.value="",n.middlewares.value="",this.updateRequestEvents(e,t),this.deleteRequestEvents(e,t)})})}};var m=class{static schemaItem({node:e,parent:t}){const{id:n,property:s,type:a}=e;return`\n    <li id="${e.id}" class="d-flex justify-content-between my-2">\n      <div><span id="${e.id}_property">${s}</span> <small id="${e.id}_type" class="ml-3 text-muted">${a}</small></div>\n      <div>\n        <span><i data-toggle="modal" data-target="#updateSchemaModal${n}" id="schema_edit_${n}" class="fa fa-edit text-muted mx-2 pointer text-h-lightgreen"></i></span>\n        <span><i id="schema_delete_${n}" class="fa fa-trash text-muted mx-2 pointer text-h-red"></i></span>\n      </div>\n      ${this.updateModal({node:e,parent:t})}\n    </li>`}static schema({id:e,name:t,schema:n}){let s="";return n.forEach(n=>{s+=this.schemaItem({node:n,parent:{id:e,name:t}})}),s}static updateModal(e){const{id:t,property:n,type:s}=e.node,{name:a}=e.parent;return`\n    <div class="modal" id="updateSchemaModal${t}">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-body">\n            <h6 class="create-schema-title text-center mb-4 text-muted">Add Schema Property to <strong>${a}</strong></h6>\n            <form name="update_${t}" method="post">\n              <small class="update_schema_property_error_${t} text-danger"></small>\n              <div class="row justify-content-center">\n                <div class="col-md-6 my-1">\n                  <input required type="text" value="${n}" class="form-control" name="property" placeholder="Property">\n                </div>\n                <div class="col-md-6 my-1">\n                  <input required type="text" value="${s}" class="form-control" name="type" placeholder="Type">\n                </div>\n                <div class="col-12 d-flex justify-content-end mt-4">\n                  <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                  <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    `}static schemaForm({id:e,name:t}){return`\n    <div class="modal" id="createSchemaModal${e}">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-body">\n            <h6 class="create-schema-title text-center mb-4 text-muted">Add Schema Property to <strong>${t}</strong></h6>\n            <form name="schema_${e}" method="post">\n              <small class="create_schema_property_error text-danger"></small>\n              <div class="row justify-content-center">\n                <div class="col-md-6 my-1">\n                  <input required type="text" class="form-control" name="property" placeholder="Property">\n                </div>\n                <div class="col-md-6 my-1">\n                  <input required type="text" class="form-control" name="type" placeholder="Type">\n                </div>\n                <div class="col-12 d-flex justify-content-end mt-4">\n                  <button type="button" class="btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                  <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Submit</button>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    `}},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};var p=class extends i{constructor(e){super(e)}createSchemaEvent(e,{id:t}){const n=document.forms[`schema_${t}`];n.addEventListener("submit",s=>{s.preventDefault();const a=n.property.value,i=n.type.value,r=(new Date).getTime().toString();this.__createSchema({projectID:e,id:t,data:{id:r,property:a,type:i}},s=>{let a=document.getElementById(t).querySelector(".schema_items");const i=a.innerHTML+m.schemaItem({node:s.data,parent:s.item});a.innerHTML=i,n.property.focus(),this.deleteSchemaEvents(e,s.item),this.updateSchemaEvents(e,s.item),n.property.value="",n.type.value=""})})}deleteSchemaEvent({projectID:e,parentId:t,id:n}){const s=document.getElementById(t).querySelector(`#schema_delete_${n}`),a=()=>{s.parentElement.parentElement.parentElement.remove()};s.addEventListener("click",s=>{this.__deleteSchema({projectID:e,parentId:t,id:n},a)})}deleteSchemaEvents(e,{id:t,name:n,schema:s}){s.forEach(n=>{this.deleteSchemaEvent({projectID:e,parentId:t,id:n.id})})}updateSchemaEvent({projectID:e,parentId:t,id:n}){const s=document.forms[`update_${n}`];s.addEventListener("submit",a=>{a.preventDefault();const i=s.property.value,r=s.type.value;i&&r?this.__updateSchema({projectID:e,parentId:t,data:{id:n,type:r,property:i}},e=>{document.getElementById(`${n}_property`).innerText=e.property,document.getElementById(`${n}_type`).innerText=e.type,document.getElementById(`updateSchemaModal${n}`).querySelector(".dismiss").click()}):window.alert("Property & data type both are required!")})}updateSchemaEvents(e,{id:t,name:n,schema:s}){s.forEach(n=>{this.updateSchemaEvent(u({projectID:e,parentId:t},n))})}};var v=class{constructor(){this._container=document.getElementById("items_container"),this._list=(()=>document.getElementById("items_list")),this._listTitle=(()=>document.getElementById("list_item_title")),this._contents=(()=>document.getElementById("contents")),this._header=(()=>document.getElementById("item_header")),this._createItemForm=(e=>document.forms[`create_item_${e}`]),this._listItem=(e=>document.getElementById(`items_list_item_${e}`))}listTitle({name:e,id:t}){return`\n      <div class="d-flex border-bottom justify-content-between align-items-center px-3" style="background: #f5f4f4db;">\n        <p class="m-0 py-2 font-title" >${e}</p>\n        <span data-toggle="modal" data-target="#createItemModal${t}" class="text-success pointer"><i class="fa fa-book"></i> New</span>\n      </div>\n    `}itemWrapper(){return'\n      <section id="item_wrapper" class="row w-100 m-0 h-100">\n\n        <div id="items_container" class="col-md-4 p-0 col-xl-3 border-right border-bottom">\n          <div id="item_header" class="header d-md-none p-2 d-flex justify-content-between border-bottom  align-items-center"></div>\n          <div id="modal_box"></div>\n          <div id="list_item_title" class="d-none d-md-block"></div>\n          <div id="items_list" class=" d-none d-md-block list-group p-2 customScroll"></div>\n        </div>\n\n        \x3c!-- Content Section  star--\x3e\n        <div id="item_container" class="col-md-8 px-0 col-xl-9 h-100">\n          <div id="contents" class="w-100 px-4 h-100"></div>\n        </div>\n\n      </section>\n    '}listItem({name:e,id:t}){return`\n      <p id="items_list_item_${t}" class="list-group-item list-item-style  pointer py-2 my-1 rounded mb-0">${e}</p>\n    `}lisMoreBtn(){return'\n      <div class="list-group-item p-0 border-0">\n        <button id="items_list_item_more" type="button" class="btn font-6 btn-light text-muted btn-block border">More</button>\n      </div>\n    '}primaryItem({id:e,name:t,items:n}){return`\n      <div class="jumbotron primary_item bg-light mt-3 py-4" style="height: 92vh;">\n        <div class="d-flex justify-content-between">\n          <a class="link" href="/">Home</a>\n          <span class="drop-target">\n            <i class="fa fa-cog text-h-green pointer"></i>\n            <div class="drop">\n              <div data-toggle="modal" data-target="#createItemModal${e}" class="drop-item text-success font-7"><i class="fa fa-book text-success"></i> New</div>\n              <div id="export_data" class="drop-item text-muted"><i class="fa fa-download text-info"></i> Export</div>\n              <div data-toggle="modal" data-target="#updateProjectModal${e}" class="drop-item text-muted"><i class="fa fa-edit text-warning"></i> Update</div>\n              <div data-toggle="modal" data-target="#deleteProjectModal${e}" class="drop-item text-muted"><i class="fa fa-trash text-danger"></i> Delete</div>\n            </div>\n          </span>\n        </div>\n        <div class="d-flex justify-content-center align-items-center" style="height: 80%;">\n          <div>\n            <h2 id="item_project_primary_title_${e}" style="letter-spacing: 3px;color: #b3b9bf;">${t}</h2>\n            <small style="letter-spacing: 2px;color: #b3b9bf;" class="d-block text-center">total items <strong>${n.length}</strong></small>\n          </div>\n        </div>\n      </div>\n      ${s.updateModal({id:e,name:t})}\n      ${s.deleteModal({id:e,name:t})}\n    `}createModal({id:e}){return`\n    <div class="modal" id="createItemModal${e}">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-body">\n            <form name="create_item_${e}" method="post">\n              <div class="form-group">\n                <small class="create_item_error text-danger"></small>\n                <input required type="text" class="form-control form-control-sm" name="name" placeholder="Item Name">\n              </div>\n              <div class="d-flex justify-content-end">\n                <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Submit</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    `}headerSection({id:e,name:t}){return`\n      <button data-toggle="modal" data-target="#createItemModal${e}" type="button" class="btn btn-sm btn-success border btn-circle ml-3"><i class="fa fa-plus"></i></button>\n      <div class="d-md-none font-6 m-0 text-muted">${t}</div>\n      <button id="progress_btn_${e}" type="button" class="btn btn-sm btn-light border px-3 d-md-none" name="button"><i class="fa fa-list-ul"></i></button>\n    `}updateModal({id:e,name:t}){return`\n      <div class="modal" id="updateItemModal${e}">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-body">\n              <form name="update_${e}" method="post">\n                <div class="py-2">\n                  <small class="update_item_error text-danger"></small>\n                  <input required type="text" class="form-control" name="name" placeholder="Name" value="${t}">\n                  <div class="d-flex justify-content-end mt-4">\n                    <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                    <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}deleteModal({id:e,name:t}){return`\n      <div class="modal" id="deleteItemModal${e}">\n        <div class="modal-dialog">\n          <div class="modal-content">\n            <div class="modal-body">\n              <form name="delete_${e}" method="post">\n                <h6 class="text-muted mb-4">Are you sure you want to delete <strong>${t}</strong>?</h6>\n                <div class="d-flex justify-content-end mt-4">\n                  <button type="button" class="btn btn-sm btn-light border font-6" data-dismiss="modal" name="button px-2">Close</button>\n                  <button active name="submit" type="submit" class="mx-3 btn btn-sm btn-light border px-3 font-6" name="button">Yes</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}displayItem(e){return`\n    <div id='${e.id}' class="item jumbotron my-3 py-3">\n      <div class="d-flex justify-content-between">\n        <h5 class="item-name w-100 mb-0">${e.name}</h5>\n        <div class="d-flex">\n          <span class="mx-2"><i data-toggle="modal" data-target="#updateItemModal${e.id}" class="pointer fa fa-edit text-muted text-h-lightgreen"></i></span>\n          <span class="mx-2"><i data-toggle="modal" data-target="#deleteItemModal${e.id}" class="pointer fa fa-trash text-muted text-h-red"></i></span>\n          <span class="mx-2"><i id="cancelItem${e.id}" class="pointer fa fa-times text-muted text-h-blue"></i></span>\n        </div>\n        ${this.updateModal(e)}\n        ${this.deleteModal(e)}\n      </div>\n      <div id="${e.name}_content">\n        ${e.schema?`<div class="block-schema bg-light p-4 my-2 rounded">\n          <div class="d-flex justify-content-between">\n            <h6>Schema</h6>\n            <span data-toggle="modal" data-target="#createSchemaModal${e.id}" class="fa-round"><i class="fa fa-plus text-success"></i></span>\n          </div>\n          ${m.schemaForm(e)}\n          <ul class="schema_items list-unstyled ml-4">\n            ${m.schema(e)}\n          </ul>\n        </div>`:""}\n        ${e.requests?`<div>\n          <div class="d-flex justify-content-between align-items-center">\n            <h6 class="my-3 w-100">Requests</h6>\n            <div data-toggle="modal" data-target="#createRequestModal${e.id}" class="ml-4 fa-round bg-h-white"><i class="fa fa-plus text-success"></i></div>\n            ${o.createModal(e)}\n          </div>\n          <div id="requests_${e.id}">\n            ${o.items(e.requests)}\n          </div>\n        </div>`:""}\n      </div>\n    </div>\n    `}},h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};const f=new v;var b=class extends d{constructor(e){super(e),this.utils=new r(e),this.req=new c(e),this.schema=new p(e)}cancelItem(e,t){const n=document.getElementById(`cancelItem${t.id}`),s=document.getElementById(t.id);n.addEventListener("click",n=>{document.title=e.name,localStorage.removeItem("apity_active_item"),f._listItem(t.id).style.background="#a9d8e7b5",s.remove(),document.getElementById("contents").innerHTML=f.primaryItem(e),this.utils.dropHandler(),this.utils.exportProject(e),e.updateEvent(h({},e,{parent:this})),e.deleteEvent(h({},e,{parent:this}))})}renderItemsList({items:e}){let t="";e.forEach(e=>{t+=f.listItem(e)}),f._list().innerHTML=t}itemsListEvent({id:e,name:t,items:n,item:s,updateEvent:a,deleteEvent:i}){var r=f._listItem(s.id);r.addEventListener("click",d=>{document.title=`${t} | ${s.name} `,localStorage.setItem("apity_active_item",s.id),r.style.background="#3fa7c8b5",r.style.border="2px solid #6a6a6a !important",this.__getProjectById(e).items.forEach(e=>{s.id!==e.id&&(f._listItem(e.id).style.background="#a9d8e7b5")}),f._contents().innerHTML=f.displayItem(s),this.cancelItem({id:e,name:t,items:n,updateEvent:a,deleteEvent:i},s),this.deleteItemEvent(e,s),this.updateItemEvent(e,s),this.schema.createSchemaEvent(e,s),this.schema.deleteSchemaEvents(e,s),this.schema.updateSchemaEvents(e,s),this.req.requestEvent(e,s),this.req.updateRequestEvents(e,s),this.req.deleteRequestEvents(e,s)})}itemsListEvents({project:e,updateEvent:t,deleteEvent:n}){e.items.forEach(s=>{this.itemsListEvent(h({},e,{item:s,updateEvent:t,deleteEvent:n}))})}createItem({project:{id:e,name:t,items:n},updateEvent:s,deleteEvent:a}){const i=f._createItemForm(e);i.name.focus(),i.addEventListener("submit",r=>{r.preventDefault();let d=i.name.value;const o=(new Date).getTime().toString();this._createItem({id:e,data:{id:o,name:d,schema:[],requests:[]},cb:r=>{f._list().innerHTML=f._list().innerHTML+f.listItem(r),this.itemsListEvents({project:{id:e,name:t,items:n},updateEvent:s,deleteEvent:a}),f._listItem(o).click(),i.name.value="",document.getElementById(`createItemModal${e}`).querySelector(".dismiss").click()}})})}deleteItemEvent(e,{id:t}){document.forms[`delete_${t}`].addEventListener("submit",n=>{n.preventDefault(),this._deleteItem({projectID:e,id:t},()=>{f._listItem(t).remove(),document.getElementById("contents").innerHTML=f.primaryItem(this.__getProjectById(e)),this.utils.dropHandler()})})}updateItemEvent(e,{id:t}){const n=document.forms[`update_${t}`];n.addEventListener("submit",s=>{s.preventDefault();const a=n.name.value;this.updateItem(e,{id:t,name:a})})}renderItemWrapper(){document.querySelector(".app").innerHTML=f.itemWrapper()}renderHeaderSection(e){f._header().innerHTML=f.headerSection(e),document.getElementById("modal_box").innerHTML=f.createModal(e),f._listTitle().innerHTML=f.listTitle(e)}checkActiveItem({items:e}){const t=localStorage.getItem("apity_active_item");return!(!t||!e.find(e=>e.id===t))&&(f._listItem(t).click(),!0)}homePageRender({project:e,updateEvent:t,deleteEvent:n}){f._contents().innerHTML=f.primaryItem(e),this.utils.dropHandler(),t(h({},e,{parent:this})),n(h({},e,{parent:this})),this.utils.exportProject(e)}render({project:e,updateEvent:t,deleteEvent:n}){document.title=e.name,this.renderItemWrapper(),this.renderHeaderSection(e),this.utils.toggleSidebar(e),this.renderItemsList(e),this.itemsListEvents({project:e,updateEvent:t,deleteEvent:n}),this.createItem({project:e,updateEvent:t,deleteEvent:n}),this.checkActiveItem(e)||this.homePageRender({project:e,updateEvent:t,deleteEvent:n})}};var _=class extends i{constructor(e){super(e),this.component=new s,this.utils=new r(e),this.item=new b(e)}renderHomePage(){document.querySelector(".app").innerHTML=this.component.homePage(),this.utils.importProject()}renderProjects(){this.checkURL()||(this.component._items().innerHTML=this.component.items(this.store),this.createProject(),this.utils.dropHandler())}createProject(){const e=document.forms.createNewProject;e.addEventListener("submit",t=>{t.preventDefault();let n=e.name.value;const s=(new Date).getTime().toString();this.__createProject({id:s,name:n,items:[]},t=>{e.name.value="";const n=document.querySelector(".quote");n&&n.remove(),this.component._items().innerHTML+=this.component.item(t),document.getElementById("createProjectModal").querySelector(".dismiss").click()})})}updateEvent({id:e,parent:t}){const n=document.forms[`updateProject${e}`];n.addEventListener("submit",s=>{s.preventDefault();const a=n.name.value;t.__updateProject({id:e,name:a},t=>{document.getElementById(`item_project_primary_title_${e}`).innerText=t.name,document.getElementById("list_item_title").firstElementChild.firstElementChild.innerText=t.name,document.getElementById(`updateProjectModal${e}`).querySelector(".dismiss").click()})})}deleteEvent({id:e,parent:t}){const n=document.forms[`deleteProject${e}`];n.addEventListener("submit",s=>{s.preventDefault();const a=n.name.value;t.__deleteProject({id:e,name:a,form:n},e=>{e&&(document.location="/")})})}checkURL(){let{searchParams:e}=new URL(document.URL),t=e.get("project");if(t){let e;if((e=this.store.find(e=>e.id.toString()===t))||(t=t.trim().toLowerCase().split("+").join(" "),e=this.store.find(e=>e.name.toLowerCase()===t)),e)return this.item.render({project:e,updateEvent:this.updateEvent,deleteEvent:this.deleteEvent}),!0}return!1}render(){this.renderHomePage(),this.renderProjects(),this.utils.focusEvent()}};window.indexedDB||console.log("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");let g=window.indexedDB.open("api_vz",1);g.onupgradeneeded=(e=>{const t=g.result.createObjectStore(["project"],{keyPath:"id"});t.createIndex("id","id",{unique:!0}),t.createIndex("name","name",{unique:!0})}),g.onsuccess=(e=>{g.result.transaction("project").objectStore("project").getAll().onsuccess=(e=>{new _({request:g,db:g.result,store:e.target.result}).render()})})}]);