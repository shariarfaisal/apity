!function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);document.getElementById("contents"),document.getElementById("items_container");const s=({node:e,parent:t})=>{const{id:n,property:s,type:a}=e;return`\n  <li id="${e.id}" class="d-flex justify-content-between my-2">\n    <div><span id="${e.id}_property">${s}</span> <small id="${e.id}_type" class="ml-3 text-muted">${a}</small></div>\n    <div>\n      <span><i data-toggle="modal" data-target="#updateSchemaModal${n}" id="schema_edit_${n}" class="fa fa-edit text-muted mx-2 pointer text-h-lightgreen"></i></span>\n      <span><i id="schema_delete_${n}" class="fa fa-trash text-muted mx-2 pointer text-h-red"></i></span>\n    </div>\n    ${function({node:e,parent:t}){return`\n  <div class="modal" id="updateSchemaModal${e.id}">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-body">\n          <h6 class="create-schema-title text-center mb-4 text-muted">Add Schema Property to <strong>${t.name}</strong></h6>\n          <form name="update_${e.id}" method="post">\n            <div class="row justify-content-center">\n              <div class="col-md-6 my-1">\n                <input required type="text" value="${e.property}" class="form-control" name="property" placeholder="Property">\n              </div>\n              <div class="col-md-6 my-1">\n                <input required type="text" value="${e.type}" class="form-control" name="type" placeholder="Type">\n              </div>\n              <div class="col-12 d-flex justify-content-end mt-4">\n                <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  `}({node:e,parent:t})}\n  </li>`};const a=({id:e,req:t,url:n,comment:s,data:a,middlewares:r})=>(r=r.filter(e=>e),`\n  <div id="request_${e}" class="request bg-light py-3 px-4 rounded my-2">\n    <div class="d-flex">\n      <p class="mb-0 w-100">\n        <strong class="text-capitalize req_url">${t}</strong>\n        <span class="req_url">${n}</span>\n        ${s?`<small class="text-muted ml-4">// ${s}</small>`:""}\n      </p>\n      <div class="d-flex">\n        <span class="mx-2"><i data-toggle="modal" data-target="#update_request_${e}" class="fa pointer text-h-lightgreen text-muted fa-edit"></i></span>\n        <span class="mx-2"><i id="delete_request_${e}" class="fa pointer text-h-red text-muted fa-trash"></i></span>\n        ${d({id:e,req:t,url:n,comment:s,data:a,middlewares:r})}\n      </div>\n    </div>\n    ${a?`<div class="py-3">\n        <textarea disabled class="form-control disabled" name="data" rows="${a.split(",").length+2}">${a}</textarea>\n      </div>`:""}\n    ${r.length>0?`<div class="my-2">\n      <div class="d-flex align-items-center">\n        <span><strong class="">Middlewars: </strong><span>\n        ${function(e){let t="";return e.forEach(function(e){t+=`<small class="mx-2">${e}</small>`}),t}(r)}\n      </div>\n    </div>`:""}\n  </div>\n  `),d=({id:e,req:t,url:n,comment:s,data:a,middlewares:d})=>`\n  <div class="modal" id="update_request_${e}">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-body">\n          <h6 class="text-center mb-4 text-muted">Update Request</strong></h6>\n          <form name="update_request_${e}" method="post">\n            <div class="row justify-content-center">\n              <div class="col-12 row w-100 my-1">\n                <div class="col-4">\n                  <div class="form-group">\n                    <label for="update_req_${e}">Request</label>\n                    <select value="${t}" name="req" id="update_req_${e}" class="form-control">\n                      <option value="Get">Get</option>\n                      <option value="Post">Post</option>\n                      <option value="Put">Put</option>\n                      <option value="Delete">Delete</option>\n                    </select>\n                  </div>\n                </div>\n                <div class="col-8">\n                  <div class="form-group">\n                    <label for="update_url_${e}">URL</label>\n                    <input required id="update_url_${e}" value="${n}" class="form-control" type="text" name="url" placeholder="URL"/>\n                  </div>\n                </div>\n              </div>\n              <div class="col-12 my-1">\n                <div class="form-group">\n                  <label for="update_payloads_${e}">Data payloads ( JSON formate)</label>\n                  <textarea class="form-control" id="update_payloads_${e}" name="data" cols="" rows="${a.split(",").length+2}" placeholder="{ property: type }">${a}</textarea>\n                </div>\n              </div>\n              <div class="col-12 my-1">\n                <div class="Comment">\n                  <label for="update_comment_${e}">Comment</label>\n                  <input value="${s}" id="update_comment_${e}" class="form-control" type="text" name="comment" placeholder="Comment ..." />\n                </div>\n              </div>\n              <div class="col-12 my-1">\n                <div class="form-group">\n                  <label for="update_middlewares_${e}">Middlewares</label>\n                  <input value="${d.join(",")}" id="update_middlewares_${e}" class="form-control" type="text" name="middlewares" placeholder="Middlewars by comma ..." />\n                </div>\n              </div>\n              <div class="col-12 d-flex justify-content-end mt-4">\n                <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  `;document.getElementById("items_container");const r=document.getElementById("items_list"),i=document.getElementById("contents"),o=e=>document.getElementById(`items_list_item_${e}`),l=({name:e,id:t})=>`\n    <p id="items_list_item_${t}" class="list-group-item list-item-style border-0 pointer py-2 my-1 rounded mb-0">${e}</p>\n  `,c=()=>'\n  <div class="jumbotron mt-3 d-flex align-items-center justify-content-center" style="height: 93vh;">\n    <div class="">\n      <h1 style="color: #d5dadf;">\n        <span><<code style="color: #b6bdc3;">Follow Your Dreams</code>/></span>\n      </h1>\n      <code><small style="color: #b6bdc3;" class="text-center d-block">https://github.com/shariarfaisal/apity</small><code>\n      <div class="d-flex mt-2 justify-content-center">\n        <span class="mx-1 bg-light rounded"><p class="px-3 mb-0 pointer text-info" id="import_data">import</p></span>\n        <span class="mx-1 bg-light rounded"><p class="px-3 mb-0 pointer" id="export_data">export</p></span>\n      </div>\n    </div>\n  </div>\n  ';var m=e=>`\n  <div id='${e.id}' class="item jumbotron my-3 py-3">\n    <div class="d-flex justify-content-between">\n      <h5 class="item-name w-100 mb-0">${e.name}</h5>\n      <div class="d-flex">\n        <span class="mx-2"><i data-toggle="modal" data-target="#updateItemModal${e.id}" class="pointer fa fa-edit text-muted text-h-lightgreen"></i></span>\n        <span class="mx-2"><i data-toggle="modal" data-target="#deleteItemModal${e.id}" class="pointer fa fa-trash text-muted text-h-red"></i></span>\n        <span class="mx-2"><i id="cancelItem${e.id}" class="pointer fa fa-times text-muted text-h-blue"></i></span>\n      </div>\n      ${(({id:e,name:t})=>`\n  <div class="modal" id="updateItemModal${e}">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-body">\n          <form name="update_${e}" method="post">\n            <div class="py-2">\n              <small class="update_item_error text-danger"></small>\n              <input required type="text" class="form-control" name="name" placeholder="Name" value="${t}">\n              <div class="d-flex justify-content-end mt-4">\n                <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  `)(e)}\n      ${(({id:e,name:t})=>`\n  <div class="modal" id="deleteItemModal${e}">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-body">\n          <form name="delete_${e}" method="post">\n            <h6 class="text-muted mb-4">Are you sure you want to delete <strong>${t}</strong>?</h6>\n            <div class="d-flex justify-content-end mt-4">\n              <button type="button" class="btn btn-sm btn-light border font-6" data-dismiss="modal" name="button px-2">Close</button>\n              <button active name="submit" type="submit" class="mx-3 btn btn-sm btn-light border px-3 font-6" name="button">Yes</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  `)(e)}\n    </div>\n    <div id="${e.name}_content">\n      ${e.schema?`<div class="block-schema bg-light p-4 my-2 rounded">\n        <div class="d-flex justify-content-between">\n          <h6>Schema</h6>\n          <span data-toggle="modal" data-target="#createSchemaModal${e.id}" class="fa-round"><i class="fa fa-plus text-success"></i></span>\n        </div>\n        ${function(e){return`\n  <div class="modal" id="createSchemaModal${e.id}">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-body">\n          <h6 class="create-schema-title text-center mb-4 text-muted">Add Schema Property to <strong>${e.name}</strong></h6>\n          <form name="schema_${e.id}" method="post">\n            <div class="row justify-content-center">\n              <div class="col-md-6 my-1">\n                <input required type="text" class="form-control" name="property" placeholder="Property">\n              </div>\n              <div class="col-md-6 my-1">\n                <input required type="text" class="form-control" name="type" placeholder="Type">\n              </div>\n              <div class="col-12 d-flex justify-content-end mt-4">\n                <button type="button" class="btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Submit</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  `}(e)}\n        <ul class="schema_items list-unstyled ml-4">\n          ${function(e){let t="";return e.schema.forEach(n=>{t+=s({node:n,parent:{id:e.id,name:e.name}})}),t}(e)}\n        </ul>\n      </div>`:""}\n      ${e.requests?`<div>\n        <div class="d-flex justify-content-between align-items-center">\n          <h6 class="my-3 w-100">Requests</h6>\n          <div data-toggle="modal" data-target="#createRequestModal${e.id}" class="ml-4 fa-round bg-h-white"><i class="fa fa-plus text-success"></i></div>\n          ${(({id:e,name:t,schema:n})=>`\n  <div class="modal" id="createRequestModal${e}">\n    <div class="modal-dialog modal-lg">\n      <div class="modal-content">\n        <div class="modal-body">\n          <h6 class="create-request-title text-center mb-4 text-muted">Add Request to <strong>${t}</strong></h6>\n          <div><small class="d-block text-center text-success request_success_msg"></small></div>\n          <form name="request_${e}" method="post">\n            <div class="row justify-content-center">\n              <div class="col-12 row w-100 my-1">\n                <div class="col-4">\n                  <div class="form-group">\n                    <label for="request">Request</label>\n                    <select name="req" id="request" class="form-control">\n                      <option value="Get">Get</option>\n                      <option value="Post">Post</option>\n                      <option value="Put">Put</option>\n                      <option value="Delete">Delete</option>\n                    </select>\n                  </div>\n                </div>\n                <div class="col-8">\n                  <div class="form-group">\n                    <label for="url">URL</label>\n                    <input required id="url" class="form-control" type="text" name="url" placeholder="URL"/>\n                  </div>\n                </div>\n              </div>\n              <div class="col-12 my-1">\n                <div class="form-group">\n                  <label for="payloads">Data payloads ( JSON formate)</label>\n                  <textarea class="form-control" id="payloads" name="data" cols="" rows="5" placeholder="{ property: type }"></textarea>\n                </div>\n              </div>\n              <div class="col-12 my-1">\n                <div class="Comment">\n                  <label for="comment">Comment</label>\n                  <input id="comment" class="form-control" type="text" name="comment" placeholder="Comment ..." />\n                </div>\n              </div>\n              <div class="col-12 my-1">\n                <div class="form-group">\n                  <label for="middlewares">Middlewares</label>\n                  <input id="middlewares" class="form-control" type="text" name="middlewares" placeholder="Middlewars by comma ..." />\n                </div>\n              </div>\n              <div class="col-12 d-flex justify-content-end mt-4">\n                <button type="button" class="dismiss btn btn-sm btn-light border font-6" data-dismiss="modal" name="button">Close</button>\n                <button name="submit" type="submit" class="mx-3 btn btn-sm btn-light border font-6" name="button">Save</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  `)(e)}\n        </div>\n        <div id="requests_${e.id}">\n          ${function(e){let t="";return e.forEach(function(e){t+=a(e)}),t}(e.requests)}\n        </div>\n      </div>`:""}\n    </div>\n  </div>\n  `;var u=class{constructor({request:e,db:t,store:n}){this.request=e,this.db=t,this.store=n}_getItemByName(e){return this.store.find(t=>t.name.toLowerCase()===e.toLowerCase())}_addItem(e){this.store.push(e)}_updateItem(e){const t=this.store.find(t=>t.id===e.id);t&&(t.name=e.name)}_deleteItem(e){const t=this.store.findIndex(t=>t.id===e);this.store.splice(t,1)}_addSchema({id:e,data:t}){const n=this.store.find(t=>t.id===e);n&&n.schema.push(t)}_updateSchema({id:e,data:t}){const n=this.store.find(t=>t.id===e);if(n){const e=n.schema.find(e=>e.id===t.id);e.property=t.property,e.type=t.type}}_deleteSchema({parentId:e,id:t}){const n=this.store.find(t=>t.id===e);if(n){const e=n.schema.findIndex(e=>e.id===t);-1!==e&&n.schema.splice(e,1)}}_addRequest({id:e,data:t}){const n=this.store.find(t=>t.id===e);n&&n.requests.push(t)}_updateRequest({id:e,data:t}){const n=this.store.find(t=>t.id===e);if(n){let e=n.requests.find(e=>e.id===t.id);e&&(e.req=t.req,e.url=t.url,e.comment=t.comment,e.data=t.data,e.middlewares=t.middlewares)}}_deleteRequest({parentId:e,id:t}){const n=this.store.find(t=>t.id===e);if(n){let e=n.requests.findIndex(e=>e.id===t);-1!==e&&n.requests.splice(e,1)}}};var p=class extends u{constructor(e){super(e),this.forms={item:document.forms.createNew}}objectStore(){return this.db.transaction("model","readwrite").objectStore("model")}deleteItem(e,t){this.objectStore().delete(e).onsuccess=(n=>{this._deleteItem(e),document.getElementById(e).remove(),t(),document.getElementById("SL_balloon_obj").remove(),document.querySelector(".modal-backdrop").remove()})}updateItem({id:e,name:t}){if(e&&t&&!this.checkItem(t,"update")){const n=this.objectStore();n.index("id").get(e).onsuccess=(s=>{const a=s.target.result,d=a.name;a.name=t,n.put(a).onsuccess=(n=>{this._updateItem({id:e,name:t});const s=document.getElementById(e);s.querySelector(".item-name").innerText=t;const a=s.querySelector(".create-schema-title");a.innerText=a.innerText.replace(d,t),document.getElementById(`items_list_item_${e}`).innerText=t;const r=document.getElementById(`createRequestModal${e}`).querySelector(".create-request-title");r.innerText=r.innerText.replace(d,t),document.getElementById(`updateItemModal${e}`).querySelector(".dismiss").click()})})}}checkItem(e,t){const n=this._getItemByName(e);let s;return s="create"===t?document.querySelector(".create_item_error"):document.querySelector(".update_item_error"),n?(s.innerText="Already exists!",!0):(s.innerText="",!1)}addItem({data:e,cb:t}){e.name?this.checkItem(e.name,"create")||(this.objectStore().add(e).onsuccess=(n=>{document.querySelector(".create_item_error").innerText="",this.forms.item.name.value="",this._addItem(e),t(e)})):window.alert("Name must not be empty!")}};var v=class extends p{constructor(e){super(e)}deleteRequest({parentId:e,id:t,cb:n}){const s=this.db.transaction("model","readwrite").objectStore("model");s.index("id").get(e).onsuccess=(a=>{let d=a.target.result,r=d.requests.findIndex(e=>e.id===t);d.requests.splice(r,1),s.put(d).onsuccess=(s=>{this._deleteRequest({parentId:e,id:t}),n()})})}updateRequest({parentId:e,data:{id:t,req:n,url:s,comment:a,data:d,middlewares:r},cb:i}){const o=this.db.transaction("model","readwrite").objectStore("model");o.index("id").get(e).onsuccess=(l=>{let c=l.target.result,m=c.requests.find(e=>e.id===t);m.req=n,m.url=s,m.comment=a,m.data=d,m.middlewares=r,o.put(c).onsuccess=(o=>{this._updateRequest({id:e,data:{id:t,req:n,url:s,comment:a,data:d,middlewares:r}}),i(m)})})}addRequest({id:e,data:t,cb:n}){const s=this.db.transaction("model","readwrite").objectStore("model");s.index("id").get(e).onsuccess=(d=>{let r=d.target.result;r.requests.push(t),s.put(r).onsuccess=(s=>{this._addRequest({id:e,data:t});let d=document.getElementById(`requests_${e}`);d.innerHTML=d.innerHTML+a(t),n(r)})})}};var h=class extends v{constructor(e){super(e)}deleteSchema({parentId:e,id:t,cb:n}){if(t){const s=this.db.transaction("model","readwrite").objectStore("model");s.get(e).onsuccess=(a=>{const d=a.target.result,r=d.schema,i=r.findIndex(e=>e.id===t);r.splice(i,1),s.put(d).onsuccess=(s=>{this._deleteSchema({parentId:e,id:t}),n()})})}else window.alert("ID must be required!")}updateSchema({parentId:e,id:t,type:n,property:s}){if(s&&n){const a=this.db.transaction("model","readwrite").objectStore("model");a.get(e).onsuccess=(d=>{const r=d.target.result,i=r.schema.find(e=>e.id===t);i.type=n,i.property=s,a.put(r).onsuccess=(a=>{this._updateSchema({id:e,data:{id:t,type:n,property:s}}),document.getElementById(`${t}_property`).innerText=s,document.getElementById(`${t}_type`).innerText=n,document.getElementById(`updateSchemaModal${t}`).querySelector(".dismiss").click()})})}else window.alert("Property & data type both are required!")}addSchema({id:e,data:t,cp:n}){if(t.property&&t.type){const a=this.db.transaction("model","readwrite").objectStore("model");a.get(e).onsuccess=(d=>{const r=d.target.result;r.schema.push(t);const i=a.put(r);i.onsuccess=(a=>{this._addSchema({id:e,data:t});const d=document.forms[`schema_${e}`];d.property.value="",d.type.value="";let i=document.getElementById(r.id).querySelector(".schema_items");const o=i.innerHTML+s({node:t,parent:{id:e,name:r.name}});i.innerHTML=o,n(r)}),i.onerror=(e=>{window.alert("Error occured"),console.log(e.target.error.message)})})}else window.alert("Property & data type both are required!")}};var b=class extends h{constructor(e){super(e)}dataItemTester({id:e,name:t,schema:n,requests:s}){e?t?n&&Array.isArray(n)?n.forEach(e=>{e.id||"string"==typeof e.data?e.property||"string"==typeof e.data?e.type||"string"==typeof e.data||cb("Schema  type required and it must have to be string"):cb("Schema  property required and it must have to be string"):cb("Schema id required and it must have to be string")}):cb("Schema required and it must have to be an array!"):cb("Item name required!"):cb("Item Id required"),s&&Array.isArray(s)?s.forEach(e=>{e.id||"string"==typeof e.data?e.req||"string"==typeof e.data?e.url||"string"==typeof e.data?e.data?"string"!=typeof e.data&&cb("Request Data have to be string!"):e.comment?"string"!=typeof e.comment&&cb("Request comment have to be string!"):e.middlewares&&(Array.isArray(e.middlewares)||cb("Request middlewares have to be string!")):cb("Request url required and it have to be string!"):cb("Request req required and it have to be string!"):cb("Request id required and it have to be string!")}):cb("Request required and it have to be an array")}dataTesting(e,t){if(e&&Array.isArray(e)){e.sort((e,t)=>e.id-t.id);let t="";(e=e.reduce((e,n)=>(t!==n.id&&(t=n.id,e.push(n)),e),[])).forEach(e=>{this.dataItemTester(e)})}else t("Data required and it have to be an array!")}focusEvent(){document.addEventListener("click",e=>{var t=e.target,n=e.target.getAttribute("data-toggle");if(n||(n=t.parentElement.getAttribute("data-toggle"),t=t.parentElement),"modal"===n){var s=t.getAttribute("data-target");if(s&&!(s=s.replace("#","")).includes("update")){var a=document.getElementById(s);a.querySelector("input")&&a.querySelector("input").focus()}}})}toggleSidebar(){const e=document.getElementById("progress_btn"),t=document.getElementById("items_list");e.addEventListener("click",e=>{t.classList.contains("d-none")?t.classList.remove("d-none"):t.classList.add("d-none")})}},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};var y=class extends h{constructor(e){super(e)}deleteRequestEvent({parentId:e,id:t}){document.getElementById(`delete_request_${t}`).addEventListener("click",n=>{this.deleteRequest({parentId:e,id:t,cb:()=>{document.getElementById(`request_${t}`).remove()}})})}deleteRequestEvents({id:e,requests:t}){t.forEach(t=>{this.deleteRequestEvent(f({parentId:e},t))})}updateRequestEvent({parentId:e,data:{id:t}}){const n=document.forms[`update_request_${t}`];n.addEventListener("submit",s=>{s.preventDefault();let d=n.req.value,r=n.url.value,i=n.data.value,o=n.comment.value,l=n.middlewares.value.split(",");this.updateRequest({parentId:e,data:{id:t,req:d,url:r,data:i,comment:o,middlewares:l},cb:n=>{document.getElementById(`update_request_${t}`).querySelector(".dismiss").click();let s=document.createElement("div");s.innerHTML=a(n),document.getElementById(`request_${t}`).innerHTML=s.children[0].innerHTML,this.updateRequestEvent({parentId:e,data:{id:t}}),this.deleteRequestEvent(f({parentId:e},n))}})})}updateRequestEvents({id:e,requests:t}){t.forEach(t=>{this.updateRequestEvent({parentId:e,data:t})})}requestEvent(e){const t=document.forms[`request_${e.id}`];t.addEventListener("submit",n=>{n.preventDefault();let s=t.req.value,a=t.url.value,d=t.data.value,r=t.comment.value,i=t.middlewares.value.split(","),o=(new Date).getTime().toString();this.addRequest({id:e.id,data:{id:o,req:s,url:a,data:d,comment:r,middlewares:i},cb:e=>{document.querySelector(".request_success_msg").innerText="Data has been added!",setTimeout(()=>{document.querySelector(".request_success_msg").innerText=""},3e3),t.data.value="",t.comment.value="",t.middlewares.value="",this.updateRequestEvents(e),this.deleteRequestEvents(e)}})})}},g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};var q=class extends h{constructor(e){super(e)}createSchemaEvent({id:e}){const t=document.forms[`schema_${e}`];t.addEventListener("submit",n=>{n.preventDefault();const s=t.property.value,a=t.type.value,d=(new Date).getTime().toString();this.addSchema({id:e,data:{id:d,property:s,type:a},cp:e=>{this.deleteSchemaEvents(e),this.updateSchemaEvents(e),t.property.focus()}})})}deleteSchemaEvent({parentId:e,id:t,name:n}){const s=document.getElementById(e).querySelector(`#schema_delete_${t}`),a=e=>{s.parentElement.parentElement.parentElement.remove()};s.addEventListener("click",n=>{this.deleteSchema({parentId:e,id:t,cb:a})})}deleteSchemaEvents({id:e,name:t,schema:n}){n.forEach(n=>{this.deleteSchemaEvent({parentId:e,id:n.id,name:t})})}updateSchemaEvent({parentId:e,id:t}){const n=document.forms[`update_${t}`];n.addEventListener("submit",s=>{s.preventDefault();const a=n.property.value,d=n.type.value;this.updateSchema({parentId:e,id:t,type:d,property:a})})}updateSchemaEvents({id:e,name:t,schema:n}){n.forEach(t=>{this.updateSchemaEvent(g({parentId:e},t))})}};var x=class extends h{constructor(e){super(e),this.utils=new b(e),this.req=new y(e),this.schema=new q(e)}importData(){const e=e=>{var t=new FileReader;t.onload=(e=>{let t;if(this.utils.dataTesting(JSON.parse(e.target.result),e=>{t=e}),t)window.alert("File containing wrong information!");else{let t=JSON.parse(e.target.result);t=t.map(e=>(this.objectStore().add(e),e)),this.store=t,this.render()}}),t.readAsText(e)};document.getElementById("import_data").addEventListener("click",t=>{t.preventDefault();const n=document.createElement("input");n.type="file",n.addEventListener("change",t=>{n.files[0]&&(n.files[0].name.endsWith(".json")?(e(n.files[0]),n.remove()):(n.remove(),window.alert("Only json file supported!")))}),n.click()})}exportData(){const e=new Blob([JSON.stringify(this.store)],{type:"application/json"});document.getElementById("export_data").addEventListener("click",t=>{this.store.length>0?((e,t)=>{const n=window.URL.createObjectURL(e),s=document.createElement("a");s.href=n,s.download=t,s.click(),s.remove(),document.addEventListener("focus",()=>{window.URL.revokeObjectURL(e)})})(e,`apity_data_${(new Date).getTime()}.json`):window.alert("There has no data!")})}cancelItem(e){const t=document.getElementById(`cancelItem${e.id}`),n=document.getElementById(e.id);t.addEventListener("click",t=>{o(e.id).style.background="#a9d8e7b5",n.remove(),document.getElementById("contents").innerHTML=c()})}renderItemsList(){let e="";this.store.forEach(t=>{e+=l(t)}),r.innerHTML=e}itemsListEvent(e){var t=o(e.id);t.addEventListener("click",n=>{t.style.background="#3fa7c8b5",this.store.forEach(t=>{e.id!==t.id&&(o(t.id).style.background="#a9d8e7b5")}),i.innerHTML=m(e),this.cancelItem(e),this.deleteItemEvent(e),this.updateItemEvent(e),this.schema.createSchemaEvent(e),this.schema.deleteSchemaEvents(e),this.schema.updateSchemaEvents(e),this.req.requestEvent(e),this.req.updateRequestEvents(e),this.req.deleteRequestEvents(e)})}itemsListEvents(){this.store.forEach(e=>{this.itemsListEvent(e)})}createItem(){const e=this.forms.item;e.name.focus(),e.addEventListener("submit",t=>{t.preventDefault();let n=e.name.value;const s=(new Date).getTime().toString();this.addItem({data:{id:s,name:n,schema:[],requests:[]},cb:e=>{r.innerHTML=r.innerHTML+l(e),this.itemsListEvents(),o(s).click(),document.getElementById("createItemModal").querySelector(".dismiss").click()}})})}deleteItemEvent({id:e}){document.forms[`delete_${e}`].addEventListener("submit",t=>{t.preventDefault(),this.deleteItem(e,()=>{o(e).remove(),document.getElementById("contents").innerHTML=c(),this.exportData(),this.importData()})})}updateItemEvent({id:e}){const t=document.forms[`update_${e}`];t.addEventListener("submit",n=>{n.preventDefault();const s=t.name.value;this.updateItem({id:e,name:s})})}render(){this.utils.toggleSidebar(),this.renderItemsList(),this.itemsListEvents(),this.createItem(),this.utils.focusEvent(),this.exportData(),this.importData()}};let _=window.indexedDB.open("api_vz",1);_.onupgradeneeded=(e=>{const t=_.result.createObjectStore("model",{keyPath:"id"});t.createIndex("id","id",{unique:!0}),t.createIndex("name","name",{unique:!0})}),_.onsuccess=(e=>{_.result.transaction("model").objectStore("model").getAll().onsuccess=(e=>{new x({request:_,db:_.result,store:e.target.result}).render()})})}]);